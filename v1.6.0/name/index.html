<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Naming Simulations · DrWatson</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="DrWatson logo"/></a><h1>DrWatson</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../project/">Project Setup</a></li><li class="current"><a class="toctext" href>Naming Simulations</a><ul class="internal"><li><a class="toctext" href="#Naming-Schemes-1">Naming Schemes</a></li><li><a class="toctext" href="#Convenience-functions-1">Convenience functions</a></li><li><a class="toctext" href="#Customizing-savename-1">Customizing <code>savename</code></a></li><li><a class="toctext" href="#Reverse-engineering-savename-1">Reverse-engineering <code>savename</code></a></li></ul></li><li><a class="toctext" href="../save/">Saving Tools</a></li><li><a class="toctext" href="../run&amp;list/">Running &amp; Listing Simulations</a></li><li><a class="toctext" href="../real_world/">Real World Examples</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Naming Simulations</a></li></ul><a class="edit-page" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/master/docs/src/name.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Naming Simulations</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Naming-Simulations-1" href="#Naming-Simulations-1">Naming Simulations</a></h1><p>Here we overview functionality that helps you quickly produce containers of parameters and name them using a consistent and intuitive naming scheme.</p><h2><a class="nav-anchor" id="Naming-Schemes-1" href="#Naming-Schemes-1">Naming Schemes</a></h2><p>A robust naming scheme allows you to create quick names for simulations, create lists of simulations, check existing simulations, etc. More importantly it allows you to easily create simulation-based names <strong>consistently</strong> and <strong>deterministically</strong>.</p><p>This is what the function <a href="#DrWatson.savename"><code>savename</code></a> does. Of course, you don&#39;t have to use it only for using names to save files. You could use it for anything that fits you (like e.g. adding identifiers to tabular data). <a href="#DrWatson.savename"><code>savename</code></a> is also surprisingly useful for creating titles of figures, e.g. <code>savename(c; connector = &quot;, &quot;)</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.savename" href="#DrWatson.savename"><code>DrWatson.savename</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">savename([prefix,], c [, suffix]; kwargs...)</code></pre><p>Create a shorthand name, commonly used for saving a file or as a figure title, based on the parameters in the container <code>c</code> (<code>Dict</code>, <code>NamedTuple</code> or any other Julia composite type, e.g. created with Parameters.jl). If provided use the <code>prefix</code> and end the name with <code>.suffix</code> (i.e. you don&#39;t have to include the <code>.</code> in your <code>suffix</code>).</p><p>The function chains keys and values into a string of the form:</p><pre><code class="language-julia">key1=val1_key2=val2_key3=val3</code></pre><p>while the keys are <strong>always sorted alphabetically.</strong> If you provide the prefix/suffix the function will do:</p><pre><code class="language-julia">prefix_key1=val1_key2=val2_key3=val3.suffix</code></pre><p>assuming you chose the default <code>connector</code>, see below. Notice that <code>prefix</code> can be any path, and in addition if it ends with <code>/</code> or <code>\</code> then the <code>connector</code> after <code>prefix</code> is ommited (although <code>joinpath</code> should be preferred instead of putting paths in <code>prefix</code>). See <a href="#DrWatson.default_prefix"><code>default_prefix</code></a> for more.</p><p><code>savename</code> can be very conveniently combined with <a href="#DrWatson.@dict"><code>@dict</code></a> or <a href="#DrWatson.@ntuple"><code>@ntuple</code></a>. See also <a href="#DrWatson.parse_savename"><code>parse_savename</code></a>.</p><p><strong>Keywords</strong></p><ul><li><code>allowedtypes = default_allowed(c)</code> : Only values of type subtyping anything in <code>allowedtypes</code> are used in the name. By default this is <code>(Real, String, Symbol)</code>.</li><li><code>accesses = allaccess(c)</code> : You can also specify which specific keys you want to use with the keyword <code>accesses</code>. By default this is all possible keys <code>c</code> can be accessed with, see <a href="#DrWatson.allaccess"><code>allaccess</code></a>.</li><li><code>digits = 3</code> : Floating point values are rounded to <code>digits</code>. In addition if the following holds:<pre><code class="language-julia">round(val; digits = digits) == round(Int, val)</code></pre>then the integer value is used in the name instead.</li><li><code>scientific = nothing</code> : Number of significant digits used for rounding of floating point values using scientific notation (e.g. <code>1.65e-7</code>). If <code>nothing</code>, normal rounding is done. </li><li><code>connector = &quot;_&quot;</code> : string used to connect the various entries.</li><li><code>expand::Vector{String} = default_expand(c)</code> : keys that will be expanded to the <code>savename</code> of their contents, to allow for nested containers. By default is empty. Notice that the type of the container must also be allowed in <code>allowedtypes</code> for <code>expand</code> to take effect! Empty containers are always skipped and the <code>savename</code> of the nested arguments is always called with its default arguments (so customization here is possible only by rolling your own container type). If the <code>savename</code> of the nested containers is <code>&quot;&quot;</code>, it is also skipped.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia">d = (a = 0.153456453, b = 5.0, mode = &quot;double&quot;)
savename(d; digits = 4) == &quot;a=0.1535_b=5_mode=double&quot;
savename(&quot;n&quot;, d) == &quot;n_a=0.153_b=5_mode=double&quot;
savename(&quot;n/&quot;, d) == &quot;n/a=0.153_b=5_mode=double&quot;
savename(d, &quot;n&quot;) == &quot;a=0.153_b=5_mode=double.n&quot;
savename(&quot;data/n&quot;, d, &quot;n&quot;) == &quot;data/n_a=0.153_b=5_mode=double.n&quot;
savename(&quot;n&quot;, d, &quot;n&quot;; connector = &quot;-&quot;) == &quot;n-a=0.153-b=5-mode=double.n&quot;
savename(d, allowedtypes = (String,)) == &quot;mode=double&quot;

rick = (never = &quot;gonna&quot;, give = &quot;you&quot;, up = &quot;!&quot;);
savename(rick) == &quot;give=you_never=gonna_up=!&quot; # keys are sorted!</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L4-L72">source</a></section><p>Notice that this naming scheme integrates perfectly with Parameters.jl.</p><h2><a class="nav-anchor" id="Convenience-functions-1" href="#Convenience-functions-1">Convenience functions</a></h2><p>Convenience functions are provided to shorten common function calls and easily create named tuples, dictionaries as well as switch between them:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.@dict" href="#DrWatson.@dict"><code>DrWatson.@dict</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@dict vars...</code></pre><p>Create a dictionary out of the given variables that has as keys the variable names and as values their values.</p><p>Notice: <code>@dict a b</code> is the correct way to call the macro. <code>@dict a, b</code> is incorrect. If you want to use commas you have to do <code>@dict(a, b)</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; ω = 5; χ = &quot;test&quot;; ζ = π/3;

julia&gt; @dict ω χ ζ
Dict{Symbol,Any} with 3 entries:
  :ω =&gt; 5
  :χ =&gt; &quot;test&quot;
  :ζ =&gt; 1.0472</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L212-L230">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.@savename" href="#DrWatson.@savename"><code>DrWatson.@savename</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@savename vars...</code></pre><p>Convenient combination of chaining a call to <a href="#DrWatson.@dict"><code>@dict</code></a> on <code>vars</code> and <a href="#DrWatson.savename"><code>savename</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">julia&gt; a = 0.153456453; b = 5.0; mode = &quot;double&quot;
julia&gt; @savename a b mode
&quot;a=0.153_b=5_mode=double&quot;</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L235-L245">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.@strdict" href="#DrWatson.@strdict"><code>DrWatson.@strdict</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@strdict vars...</code></pre><p>Same as <a href="#DrWatson.@dict"><code>@dict</code></a> but the key type is <code>String</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L267-L270">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.@ntuple" href="#DrWatson.@ntuple"><code>DrWatson.@ntuple</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@ntuple vars...</code></pre><p>Create a <code>NamedTuple</code> out of the given variables that has as keys the variable names and as values their values.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; ω = 5; χ = &quot;test&quot;; ζ = 3.14;

julia&gt; @ntuple ω χ ζ
(ω = 5, χ = &quot;test&quot;, ζ = 3.14)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L280-L292">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.ntuple2dict" href="#DrWatson.ntuple2dict"><code>DrWatson.ntuple2dict</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">ntuple2dict(nt) -&gt; dict</code></pre><p>Convert a <code>NamedTuple</code> to a dictionary.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L303-L306">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.dict2ntuple" href="#DrWatson.dict2ntuple"><code>DrWatson.dict2ntuple</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">dict2ntuple(dict) -&gt; ntuple</code></pre><p>Convert a dictionary (with <code>Symbol</code> or <code>String</code> as key type) to a <code>NamedTuple</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L309-L313">source</a></section><h2><a class="nav-anchor" id="Customizing-savename-1" href="#Customizing-savename-1">Customizing <code>savename</code></a></h2><p>You can customize <a href="#DrWatson.savename"><code>savename</code></a> for your own Types. For example you could make it so that it only uses some specific keys instead of all of them, only specific types, or you could make it access data in a different way (maybe even loading files!). You can even make it have a custom <code>prefix</code>!</p><p>To do that you may extend the following functions:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.allaccess" href="#DrWatson.allaccess"><code>DrWatson.allaccess</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">allaccess(c)</code></pre><p>Return all the keys <code>c</code> can be accessed using <a href="#DrWatson.access"><code>access</code></a>. For dictionaries/named tuples this is <code>keys(c)</code>, for everything else it is <code>fieldnames(typeof(c))</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L145-L150">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.access" href="#DrWatson.access"><code>DrWatson.access</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">access(c, key)</code></pre><p>Access <code>c</code> with given key. For <code>AbstractDict</code> this is <code>getindex</code>, for anything else it is <code>getproperty</code>.</p><pre><code class="language-none">access(c, keys...)</code></pre><p>When given multiple keys, <code>access</code> is called recursively, i.e. <code>access(c, key1, key2) = access(access(c, key1), key2)</code> and so on. For example, if <code>c, c.k1</code> are <code>NamedTuple</code>s then <code>access(c, k1, k2) == c.k1.k2</code>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Please only extend the single key method when customizing <code>access</code> for your own Types.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L157-L171">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.default_allowed" href="#DrWatson.default_allowed"><code>DrWatson.default_allowed</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">default_allowed(c) = (Real, String, Symbol)</code></pre><p>Return the (super-)Types that will be used as <code>allowedtypes</code> in <a href="#DrWatson.savename"><code>savename</code></a> or other similar functions.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L176-L180">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.default_prefix" href="#DrWatson.default_prefix"><code>DrWatson.default_prefix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">default_prefix(c) = &quot;&quot;</code></pre><p>Return the <code>prefix</code> that will be used by default in <a href="#DrWatson.savename"><code>savename</code></a> or other similar functions.</p><p>Notice that if <code>default_prefix</code> is defined for <code>c</code> but a prefix is also given to <a href="#DrWatson.savename"><code>savename</code></a> then the two values are merged via <code>joinpath</code> for convenience (if they are not the same of course).</p><p>E.g. defining <code>default_prefix(c::MyType) = &quot;lala&quot;</code> and calling</p><pre><code class="language-julia">savename(datadir(), mytype)</code></pre><p>will in fact return a string that looks like</p><pre><code class="language-julia">&quot;path/to/data/lala_p1=...&quot;</code></pre><p>This allows <a href="#DrWatson.savename"><code>savename</code></a> to work well with <a href="../save/#DrWatson.produce_or_load"><code>produce_or_load</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L183-L201">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.default_expand" href="#DrWatson.default_expand"><code>DrWatson.default_expand</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">default_expand(c) = String[]</code></pre><p>Keys that should be expanded in their <code>savename</code> within <a href="#DrWatson.savename"><code>savename</code></a>. Must be <code>Vector{String}</code> (as all keys are first translated into strings inside <code>savename</code>).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L204-L209">source</a></section><p>See <a href="../real_world/#Real-World-Examples-1">Real World Examples</a> for an example of customizing <code>savename</code>. Specifically, have a look at <a href="../real_world/#savename-and-nested-containers-1"><code>savename</code> and nested containers</a> for a way to</p><h2><a class="nav-anchor" id="Reverse-engineering-savename-1" href="#Reverse-engineering-savename-1">Reverse-engineering <code>savename</code></a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DrWatson.parse_savename" href="#DrWatson.parse_savename"><code>DrWatson.parse_savename</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">parse_savename(filename::AbstractString; kwargs...)</code></pre><p>Try to convert a shorthand name produced with <a href="#DrWatson.savename"><code>savename</code></a> into a dictionary containing the parameters and their values, a prefix and suffix string. Return <code>prefix, parameters, suffix</code>.</p><p>Parsing the key-value parts of <code>filename</code> is performed under the assumption that the value is delimited by <code>=</code> and the closest <code>connector</code>. This allows the user to have <code>connector</code> (eg. <code>_</code>) in a key name (variable name) but not in the value part.</p><p><strong>Keywords</strong></p><ul><li><code>connector = &quot;_&quot;</code> : string used to connect the various entries.</li><li><code>parsetypes = (Int, Float64)</code> : tuple used to define the types which should be tried when parsing the values given in <code>filename</code>. Fallback is <code>String</code>.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/476883bc4337678b318c517bbc10c8dbe1eb8b54/src/naming.jl#L322-L336">source</a></section><footer><hr/><a class="previous" href="../project/"><span class="direction">Previous</span><span class="title">Project Setup</span></a><a class="next" href="../save/"><span class="direction">Next</span><span class="title">Saving Tools</span></a></footer></article></body></html>
