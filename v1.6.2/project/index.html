<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Project Setup · DrWatson</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="DrWatson logo"/></a><div class="docs-package-name"><span class="docs-autofit">DrWatson</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Project Setup</a><ul class="internal"><li><a class="tocitem" href="#Default-Project-Setup-1"><span>Default Project Setup</span></a></li><li><a class="tocitem" href="#Initializing-a-Project-1"><span>Initializing a Project</span></a></li><li><a class="tocitem" href="#Activating-a-Project-1"><span>Activating a Project</span></a></li><li><a class="tocitem" href="#Navigating-a-Project-1"><span>Navigating a Project</span></a></li><li><a class="tocitem" href="#Reproducibility-1"><span>Reproducibility</span></a></li></ul></li><li><a class="tocitem" href="../name/">Naming Simulations</a></li><li><a class="tocitem" href="../save/">Saving Tools</a></li><li><a class="tocitem" href="../run&amp;list/">Running &amp; Listing Simulations</a></li><li><a class="tocitem" href="../real_world/">Real World Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Project Setup</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Project Setup</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/master/docs/src/project.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Project-Setup-1"><a class="docs-heading-anchor" href="#Project-Setup-1">Project Setup</a><a class="docs-heading-anchor-permalink" href="#Project-Setup-1" title="Permalink"></a></h1><p>Part of the functionality of DrWatson is creating and navigating through a project setup consistently. This works even if you move your project to a different location/computer or send it to a colleague with a different Julia installation. In addition, the navigation process is identical across any project that uses DrWatson.</p><p>This can &quot;just work&quot; (TM) because of the following principles:</p><ol><li><strong>Your science project is also a <a href="https://julialang.github.io/Pkg.jl/v1/environments/">Julia project</a> defined by a <code>Project.toml</code> file.</strong> This way the project tracks the used packages (and their versions) and can be shared with any other Julia user.</li><li><strong>You first activate this project environment before running any code.</strong> This way you ensure that your project runs on the specified package installation (instead of the global one). See <a href="#Activating-a-Project-1">Activating a Project</a> for ways to do this.</li><li><strong>You use the functions <code>projectdir</code>, <code>datadir</code>, etc. from DrWatson</strong> to navigate your project (see <a href="#Navigating-a-Project-1">Navigating a Project</a>).</li></ol><p>Importantly, our suggested project setup was designed to be fully reproducible, see <a href="#Reproducibility-1">Reproducibility</a>.</p><h2 id="Default-Project-Setup-1"><a class="docs-heading-anchor" href="#Default-Project-Setup-1">Default Project Setup</a><a class="docs-heading-anchor-permalink" href="#Default-Project-Setup-1" title="Permalink"></a></h2><p>DrWatson suggests a universal project structure for any scientific project, which is the following:</p><pre><code class="language-none">│projectdir          &lt;- Project&#39;s main folder. It is initialized as a Git
│                       repository with a reasonable .gitignore file.
│
├── _research        &lt;- WIP scripts, code, notes, comments,
│   |                   to-dos and anything in an alpha state.
│   └── tmp          &lt;- Temporary data folder.
│
├── data             &lt;- **Immutable and add-only!**
│   ├── sims         &lt;- Data resulting directly from simulations.
│   ├── exp_pro      &lt;- Data from processing experiments.
│   └── exp_raw      &lt;- Raw experimental data.
│
├── plots            &lt;- Self-explanatory.
├── notebooks        &lt;- Jupyter, Weave or any other mixed media notebooks.
│
├── papers           &lt;- Scientific papers resulting from the project.
│
├── scripts          &lt;- Various scripts, e.g. simulations, plotting, analysis,
│   │                   The scripts use the `src` folder for their base code.
│   └── intro.jl     &lt;- Simple file that uses DrWatson and uses its greeting.
│
├── src              &lt;- Source code for use in this project. Contains functions,
│                       structures and modules that are used throughout
│                       the project and in multiple scripts.
│
├── README.md        &lt;- Optional top-level README for anyone using this project.
├── .gitignore       &lt;- by default ignores _research, data, plots, videos,
│                       notebooks and latex-compilation related files.
│
├── Manifest.toml    &lt;- Contains full list of exact package versions used currently.
└── Project.toml     &lt;- Main project file, allows activation and installation.
                        Includes DrWatson by default.
</code></pre><h3 id="src-vs-scripts-1"><a class="docs-heading-anchor" href="#src-vs-scripts-1"><code>src</code> vs <code>scripts</code></a><a class="docs-heading-anchor-permalink" href="#src-vs-scripts-1" title="Permalink"></a></h3><p>Seems like <code>src</code> and <code>scripts</code> folders have pretty similar functionality. However there is a distinction between these two. You can follow these mental rules to know where to put <code>file.jl</code>:</p><ul><li>If upon <code>include(&quot;file.jl&quot;)</code> there is <em>anything</em> being produced, be it data files, plots or even output to the console, then it should be in <code>scripts</code>.</li><li>If it is functionality used across multiple files or pipelines, it should be in <code>src</code>.</li><li><code>src</code> should only contain files that define functions or types but not output anything. You can also organize <code>src</code> to be a Julia package, or contain multiple Julia packages.</li></ul><p>Notice that it is typically the case that in the <code>src</code> folder you will have a full Julia package as a subfolder. In such cases be sure that you add the <em>relative</em> path to the package in your <code>Manifest.toml</code>, instead of the absolute path. This will ensure reproducibility!</p><h2 id="Initializing-a-Project-1"><a class="docs-heading-anchor" href="#Initializing-a-Project-1">Initializing a Project</a><a class="docs-heading-anchor-permalink" href="#Initializing-a-Project-1" title="Permalink"></a></h2><p>To initialize a project as described in the <a href="#Default-Project-Setup-1">Default Project Setup</a> section, we provide the following function:</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.initialize_project" href="#DrWatson.initialize_project"><code>DrWatson.initialize_project</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">initialize_project(path [, name]; kwargs...)</code></pre><p>Initialize a scientific project expected by <code>DrWatson</code> inside the given <code>path</code>. If its <code>name</code> is not given, it is assumed to be the folder&#39;s name.</p><p>The new project remains activated for you to immidiately add packages.</p><p><strong>Keywords</strong></p><ul><li><code>readme = true</code> : adds a README.md file.</li><li><code>authors = nothing</code> : if a string or container of strings, adds the authors in the Project.toml file.</li><li><code>force = false</code> : If the <code>path</code> is <em>not</em> empty then throw an error. If however <code>force</code> is <code>true</code> then recursively delete everything in the path and create the project.</li><li><code>git = true</code> : Make the project a Git repository.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L182-L196">source</a></section></article><h3 id="Including-Julia-packages-in-src-1"><a class="docs-heading-anchor" href="#Including-Julia-packages-in-src-1">Including Julia packages in <code>src</code></a><a class="docs-heading-anchor-permalink" href="#Including-Julia-packages-in-src-1" title="Permalink"></a></h3><p>Notice that the project initialized by DrWatson does not represent a Julia package. It represents a scientific project. That being said, it is often the case that you want to develop normal Julia Modules inside your project, so that you can later use them in your code with <code>using PackageName</code>. The proper way to do this is to initialize Julia packages, using the package manager, inside the <code>src</code> folder, using these steps:</p><ol><li>Active your project that uses DrWatson.</li><li>Change directory to the project&#39;s folder (very important).</li><li>Go into package mode and initialize a package with the name that you want: <code>generate src/PackageName</code></li><li><code>dev</code> the local path to <code>PackageName</code> using the package manager , e.g. <code>dev src/PackageName</code>. Notice that this command uses a local path, see <a href="https://github.com/JuliaLang/Pkg.jl/pull/1215">this PR</a> for more details.</li></ol><p>Now whenever you do <code>using PackageName</code>, the local version will be used. This will still work even if you transfer your project to another computer, because the Manifest.toml file stores the local path.</p><h2 id="Activating-a-Project-1"><a class="docs-heading-anchor" href="#Activating-a-Project-1">Activating a Project</a><a class="docs-heading-anchor-permalink" href="#Activating-a-Project-1" title="Permalink"></a></h2><p>This part of DrWatson&#39;s functionality requires you to have your scientific project (and as a consequence, the Julia project) activated. This can be done in multiple ways:</p><ol><li>doing <code>Pkg.activate(&quot;path/to/project&quot;)</code> programmatically</li><li>using the startup flag <code>--project path</code> when starting Julia</li><li>by setting the <a href="https://docs.julialang.org/en/latest/manual/environment-variables/#JULIA_PROJECT-1"><code>JULIA_PROJECT</code></a> environment variable</li><li>using the functions <a href="#DrWatson.quickactivate"><code>quickactivate</code></a> and <a href="#DrWatson.findproject"><code>findproject</code></a> offered by DrWatson.</li></ol><p>We recommend the fourth approach, although it does come with a caveat (see the docstring of <a href="#DrWatson.quickactivate"><code>quickactivate</code></a>).</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.quickactivate" href="#DrWatson.quickactivate"><code>DrWatson.quickactivate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">quickactivate(path [, name::String])</code></pre><p>Activate the project found by recursively searching the <code>path</code> and its parents for a valid Julia project file. Optionally check if <code>name</code> is the same as the activated project&#39;s name. If it is not, throw an error. See also [<code>@quickactivate</code>]. Do nothing if the project found is already active, or if no project file is found.</p><p>Example:</p><pre><code class="language-julia">using DrWatson
quickactivate(&quot;path/to/project&quot;, &quot;Best project in the WOLRLDD&quot;)</code></pre><p>Notice that this function is <em>first</em> activating the project and <em>then</em> checking if it matches the <code>name</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Note that to access <code>quickactivate</code> you need to be <code>using DrWatson</code>. For this to be possible <code>DrWatson</code> must be already added in the existing global environment. The version of <code>DrWatson</code> loaded therefore will be the one of the global environment, and not of the activated project. To avoid unexpected behavior take care so that these two versions coincide.</p><p><strong>In addition please be very careful to write:</strong></p><pre><code class="language-julia">using DrWatson
quickactivate(@__DIR__)
using Package1, Package2
# do stuff</code></pre><p><strong>instead of the erroneous:</strong></p><pre><code class="language-julia">using DrWatson, Package1, Package2
quickactivate(@__DIR__)
# do stuff</code></pre><p>This ensures that the packages you use will all have the versions dictated by your activated project (besides <code>DrWatson</code>, since this is impossible to do using <code>quickactivate</code>).</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L90-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DrWatson.@quickactivate" href="#DrWatson.@quickactivate"><code>DrWatson.@quickactivate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@quickactivate</code></pre><p>Equivalent with <code>quickactivate(@__DIR__)</code>.</p><pre><code class="language-none">@quickactivate name</code></pre><p>Equivalent with <code>quickactivate(@__DIR__, name)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L147-L153">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DrWatson.findproject" href="#DrWatson.findproject"><code>DrWatson.findproject</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">findproject(path = pwd()) -&gt; project_path</code></pre><p>Recursively search <code>path</code> and its parents for a valid Julia project file (anything in <code>Base.project_names</code>). If it is found return its path, otherwise issue a warning and return <code>nothing</code>.</p><p>The function stops searching if it hits either the home directory or the root directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L61-L70">source</a></section></article><p>Notice that to get the current project&#39;s name you can use:</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.projectname" href="#DrWatson.projectname"><code>DrWatson.projectname</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">projectname()</code></pre><p>Return the name of the currently active project.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L46-L49">source</a></section></article><h2 id="Navigating-a-Project-1"><a class="docs-heading-anchor" href="#Navigating-a-Project-1">Navigating a Project</a><a class="docs-heading-anchor-permalink" href="#Navigating-a-Project-1" title="Permalink"></a></h2><p>To be able to navigate the project consistently, DrWatson provides the core function</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.projectdir" href="#DrWatson.projectdir"><code>DrWatson.projectdir</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">projectdir()</code></pre><p>Return the directory of the currently active project.</p><pre><code class="language-julia">projectdir(args...) = joinpath(projectdir(), args...)</code></pre><p>Join the path of the currently active project with <code>args</code> (typically other subfolders).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/9b783a34a1b3b46f7fd93e4310474d0a1655cce4/src/project_setup.jl#L18-L27">source</a></section></article><p>Besides the above, the following derivative functions</p><pre><code class="language-julia">datadir()
srcdir()
plotsdir()
scriptsdir()
papersdir()</code></pre><p>behave exactly like <code>projectdir</code> but have as root the appropriate subdirectory. These are also defined due to the frequent use of these subdirectories.</p><p>All of these functions take advantage of <code>joinpath</code>, ensuring an error-free path creation that works across different operating systems. It is heavily advised to use <code>projectdir</code> and derivatives by giving them the subpaths as arguments, instead of using multiplication between paths:</p><pre><code class="language-julia">datadir(&quot;foo&quot;, &quot;test.bson&quot;) # preferred
datadir() * &quot;/foo/test.bson&quot; # not recommended</code></pre><h2 id="Reproducibility-1"><a class="docs-heading-anchor" href="#Reproducibility-1">Reproducibility</a><a class="docs-heading-anchor-permalink" href="#Reproducibility-1" title="Permalink"></a></h2><p>The project setup approach that DrWatson suggests is designed to work flawlessly with Julia standards, to be easy to share and to be fully reproducible. There are three reasons that <strong>true</strong> reproducibility is possible:</p><ol><li>The project&#39;s used packages are embedded in the project because of <code>Manifest.toml</code>.</li><li>The navigation around the folders of the project uses local directories.</li><li>The project is a Git repository, which means that it has a detailed (and re-traceable) history of all changes and additions.</li></ol><p>If you send your entire project folder to a colleague, they only need to do:</p><pre><code class="language-julia">julia&gt; cd(&quot;path/to/project&quot;)
pkg&gt; activate .
pkg&gt; instantiate</code></pre><p>to use your project (<em>assuming of course that you are both using the same Julia installation and version</em>). All required packages and dependencies will be installed and then any script that was running in your computer will also be running in their computer <strong>in the same way!</strong></p><p>In addition, with DrWatson you have the possibility of &quot;tagging&quot; each simulation created with the commit id, see the discussion around <a href="../save/#DrWatson.gitdescribe"><code>gitdescribe</code></a> and <a href="../save/#DrWatson.tag!"><code>tag!</code></a>. This way, any data result obtained at any moment can be truly reproduced simply by resetting the Git tree to the appropriate commit and running the code.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../name/">Naming Simulations »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 17 December 2019 09:56">Tuesday 17 December 2019</span>. Using Julia version 1.3.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
