<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Project Setup · DrWatson</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Quicksand|Montserrat|Source+Code+Pro|Lora&amp;display=swap" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="DrWatson logo"/></a><div class="docs-package-name"><span class="docs-autofit">DrWatson</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../workflow/">DrWatson Workflow Tutorial</a></li><li class="is-active"><a class="tocitem" href>Project Setup</a><ul class="internal"><li><a class="tocitem" href="#Default-Project-Setup-1"><span>Default Project Setup</span></a></li><li><a class="tocitem" href="#Initializing-a-Project-1"><span>Initializing a Project</span></a></li><li><a class="tocitem" href="#Activating-a-Project-1"><span>Activating a Project</span></a></li><li><a class="tocitem" href="#Including-Julia-packages/modules-in-src-1"><span>Including Julia packages/modules in <code>src</code></span></a></li><li><a class="tocitem" href="#Navigating-a-Project-1"><span>Navigating a Project</span></a></li><li><a class="tocitem" href="#Reproducibility-1"><span>Reproducibility</span></a></li><li><a class="tocitem" href="#Transitioning-an-existing-project-to-DrWatson-1"><span>Transitioning an existing project to DrWatson</span></a></li></ul></li><li><a class="tocitem" href="../name/">Naming Simulations</a></li><li><a class="tocitem" href="../save/">Saving Tools</a></li><li><a class="tocitem" href="../run&amp;list/">Running &amp; Listing Simulations</a></li><li><a class="tocitem" href="../real_world/">Real World Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Project Setup</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Project Setup</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/master/docs/src/project.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Project-Setup-1"><a class="docs-heading-anchor" href="#Project-Setup-1">Project Setup</a><a class="docs-heading-anchor-permalink" href="#Project-Setup-1" title="Permalink"></a></h1><p>Part of the functionality of DrWatson is creating and navigating through a project setup consistently. This works even if you move your project to a different location/computer or send it to a colleague with a different Julia installation. In addition, the navigation process is identical across any project that uses DrWatson.</p><p>This can &quot;just work&quot; (TM) because of the following principles:</p><ol><li><strong>Your science project is also a <a href="https://julialang.github.io/Pkg.jl/v1/environments/">Julia project</a> defined by a <code>Project.toml</code> file.</strong> This way the project tracks the used packages (and their versions) and can be shared with any other Julia user.</li><li><strong>You first activate this project environment before running any code.</strong> This way you ensure that your project runs on the specified package installation (instead of the global one). See <a href="#Activating-a-Project-1">Activating a Project</a> for ways to do this.</li><li><strong>You use the functions <code>projectdir</code>, <code>datadir</code>, etc. from DrWatson</strong> to navigate your project (see <a href="#Navigating-a-Project-1">Navigating a Project</a>).</li></ol><p>Importantly, our suggested project setup was designed to be fully reproducible, see <a href="#Reproducibility-1">Reproducibility</a>.</p><h2 id="Default-Project-Setup-1"><a class="docs-heading-anchor" href="#Default-Project-Setup-1">Default Project Setup</a><a class="docs-heading-anchor-permalink" href="#Default-Project-Setup-1" title="Permalink"></a></h2><p>DrWatson suggests a universal project structure for any scientific project, which is the following:</p><pre><code class="language-none">│projectdir          &lt;- Project&#39;s main folder. It is initialized as a Git
│                       repository with a reasonable .gitignore file.
│
├── _research        &lt;- WIP scripts, code, notes, comments,
│   |                   to-dos and anything in an alpha state.
│   └── tmp          &lt;- Temporary data folder.
│
├── data             &lt;- **Immutable and add-only!**
│   ├── sims         &lt;- Data resulting directly from simulations.
│   ├── exp_pro      &lt;- Data from processing experiments.
│   └── exp_raw      &lt;- Raw experimental data.
│
├── plots            &lt;- Self-explanatory.
├── notebooks        &lt;- Jupyter, Weave or any other mixed media notebooks.
│
├── papers           &lt;- Scientific papers resulting from the project.
│
├── scripts          &lt;- Various scripts, e.g. simulations, plotting, analysis,
│   │                   The scripts use the `src` folder for their base code.
│   └── intro.jl     &lt;- Simple file that uses DrWatson and uses its greeting.
│
├── src              &lt;- Source code for use in this project. Contains functions,
│                       structures and modules that are used throughout
│                       the project and in multiple scripts.
│
├── README.md        &lt;- Optional top-level README for anyone using this project.
├── .gitignore       &lt;- by default ignores _research, data, plots, videos,
│                       notebooks and latex-compilation related files.
│
├── Manifest.toml    &lt;- Contains full list of exact package versions used currently.
└── Project.toml     &lt;- Main project file, allows activation and installation.
                        Includes DrWatson by default.
</code></pre><h3 id="src-vs-scripts-1"><a class="docs-heading-anchor" href="#src-vs-scripts-1"><code>src</code> vs <code>scripts</code></a><a class="docs-heading-anchor-permalink" href="#src-vs-scripts-1" title="Permalink"></a></h3><p>Seems like <code>src</code> and <code>scripts</code> folders have pretty similar functionality. However there is a distinction between these two. You can follow these mental rules to know where to put <code>file.jl</code>:</p><ul><li>If upon <code>include(&quot;file.jl&quot;)</code> there is <em>anything</em> being produced, be it data files, plots or even output to the console, then it should be in <code>scripts</code>.</li><li>If it is functionality used across multiple files or pipelines, it should be in <code>src</code>.</li><li><code>src</code> should only contain files that define functions or types but not output anything.</li></ul><h2 id="Initializing-a-Project-1"><a class="docs-heading-anchor" href="#Initializing-a-Project-1">Initializing a Project</a><a class="docs-heading-anchor-permalink" href="#Initializing-a-Project-1" title="Permalink"></a></h2><p>To initialize a project as described in the <a href="#Default-Project-Setup-1">Default Project Setup</a> section, we provide the following function:</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.initialize_project" href="#DrWatson.initialize_project"><code>DrWatson.initialize_project</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">initialize_project(path [, name]; kwargs...)</code></pre><p>Initialize a scientific project expected by <code>DrWatson</code> in <code>path</code> (directory representing an empty folder). If <code>name</code> is not given, it is assumed to be the folder&#39;s name.</p><p>The new project remains activated for you to immidiately add packages.</p><p><strong>Keywords</strong></p><ul><li><code>readme = true</code> : adds a README.md file.</li><li><code>authors = nothing</code> : if a string or container of strings, adds the authors in the Project.toml file and README.md.</li><li><code>force = false</code> : If the <code>path</code> is <em>not</em> empty then throw an error. If however <code>force</code> is <code>true</code> then recursively delete everything in the path and create the project.</li><li><code>git = true</code> : Make the project a Git repository.</li><li><code>template = DrWatson.DEFAULT_TEMPLATE</code> : A template containing the folder structure of the project. It should be a vector containing strings (folders) or pairs of <code>String =&gt; Vector{String}</code>, containg a folder and subfolders (this can be nested further). Example:<pre><code class="language-none">DEFAULT_TEMPLATE = [
  &quot;_research&quot;, 
  &quot;src&quot;, 
  &quot;scripts&quot;,
  &quot;plots&quot;, 
  &quot;notebooks&quot;,
  &quot;papers&quot;,
  &quot;data&quot; =&gt; [&quot;sims&quot;, &quot;exp_raw&quot;, &quot;exp_pro&quot;],
]</code></pre>Obviously, the default derivative functions of <a href="#DrWatson.projectdir"><code>projectdir</code></a>, such as <code>datadir</code>, have been written with the default template in mind.</li><li><code>placeholder = false</code> : Add hidden place holder files in each default folder to ensure  that project folder structure is maintained when the directory is cloned. Only used when <code>git = true</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L188-L222">source</a></section></article><h2 id="Activating-a-Project-1"><a class="docs-heading-anchor" href="#Activating-a-Project-1">Activating a Project</a><a class="docs-heading-anchor-permalink" href="#Activating-a-Project-1" title="Permalink"></a></h2><p>This part of DrWatson&#39;s functionality requires you to have your scientific project (and as a consequence, the Julia project) activated. This can be done in multiple ways:</p><ol><li>doing <code>Pkg.activate(&quot;path/to/project&quot;)</code> programmatically</li><li>using the startup flag <code>--project path</code> when starting Julia</li><li>by setting the <a href="https://docs.julialang.org/en/latest/manual/environment-variables/#JULIA_PROJECT-1"><code>JULIA_PROJECT</code></a> environment variable</li><li>using the functions <a href="#DrWatson.quickactivate"><code>quickactivate</code></a> and <a href="#DrWatson.findproject"><code>findproject</code></a> offered by DrWatson.</li></ol><p>We recommend the fourth approach, although it does come with a caveat (see the docstring of <a href="#DrWatson.quickactivate"><code>quickactivate</code></a>).</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.quickactivate" href="#DrWatson.quickactivate"><code>DrWatson.quickactivate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">quickactivate(path [, name::String])</code></pre><p>Activate the project found by recursively searching the <code>path</code> and its parents for a valid Julia project file. Optionally check if <code>name</code> is the same as the activated project&#39;s name. If it is not, throw an error. See also <a href="#DrWatson.@quickactivate"><code>@quickactivate</code></a>. Do nothing if the project found is already active, or if no project file is found.</p><p>Example:</p><pre><code class="language-julia">using DrWatson
quickactivate(&quot;path/to/project&quot;, &quot;Best project in the WOLRLDD&quot;)</code></pre><p>Notice that this function is <em>first</em> activating the project and <em>then</em> checking if it matches the <code>name</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Note that to access <code>quickactivate</code> you need to be <code>using DrWatson</code>. For this to be possible <code>DrWatson</code> must be already added in the existing global environment. If you use <code>quickactivate</code> and share your project, do note to your co-workers that they need to add <code>DrWatson</code> globally (the default README.md created by <code>initialize_project</code> says this automatically).</p><p><strong>In addition, in your scripts write:</strong></p><pre><code class="language-julia">using DrWatson # YES
quickactivate(@__DIR__)
using Package1, Package2
# do stuff</code></pre><p><strong>instead of the erroneous:</strong></p><pre><code class="language-julia">using DrWatson, Package1, Package2 # NO!
quickactivate(@__DIR__)
# do stuff</code></pre><p>This ensures that the packages you use will all have the versions dictated by your activated project (besides <code>DrWatson</code>, since this is impossible to do using <code>quickactivate</code>).</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L89-L130">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DrWatson.@quickactivate" href="#DrWatson.@quickactivate"><code>DrWatson.@quickactivate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@quickactivate</code></pre><p>Equivalent with <code>quickactivate(@__DIR__)</code>.</p><pre><code class="language-none">@quickactivate name::String</code></pre><p>Equivalent with <code>quickactivate(@__DIR__, name)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L155-L161">source</a></section><section><div><pre><code class="language-none">@quickactivate ProjectName::Symbol</code></pre><p>If given a <code>Symbol</code> then first <code>quickactivate(@__DIR__, string(ProjectName))</code>, and then do <code>using ProjectName</code>, as if the symbol was representing a module name.</p><p>This ties with <a href="../real_world/#Making-your-project-a-usable-module-1">Making your project a usable module</a> functionality, see the docs for an example.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L167-L174">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DrWatson.findproject" href="#DrWatson.findproject"><code>DrWatson.findproject</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">findproject(path = pwd()) -&gt; project_path</code></pre><p>Recursively search <code>path</code> and its parents for a valid Julia project file (anything in <code>Base.project_names</code>). If it is found return its path, otherwise issue a warning and return <code>nothing</code>.</p><p>The function stops searching if it hits either the home directory or the root directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L60-L69">source</a></section></article><p>Notice that to get the current project&#39;s name you can use:</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.projectname" href="#DrWatson.projectname"><code>DrWatson.projectname</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">projectname()</code></pre><p>Return the name of the currently active project.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L45-L48">source</a></section></article><h2 id="Including-Julia-packages/modules-in-src-1"><a class="docs-heading-anchor" href="#Including-Julia-packages/modules-in-src-1">Including Julia packages/modules in <code>src</code></a><a class="docs-heading-anchor-permalink" href="#Including-Julia-packages/modules-in-src-1" title="Permalink"></a></h2><p>Notice that the project initialized by DrWatson does not represent a Julia package. It represents a scientific project. That being said, it is often the case that you want to develop normal Julia Modules (and perhaps later publish them as packages) inside your project, so that you can later use them in your code with <code>using ModuleName</code>. The proper way to do this is to initialize Julia packages, using the package manager, inside the <code>src</code> folder, using these steps:</p><ol><li>Active your project that uses DrWatson.</li><li>Change directory to the project&#39;s main folder (<strong>important!</strong>).</li><li>Go into package mode and initialize a package with the name that you want: <code>generate src/ModuleName</code></li><li><code>dev</code> the local path to <code>ModuleName</code> using the package manager: <code>dev src/ModuleName</code>. Notice that this command uses a local path, see <a href="https://github.com/JuliaLang/Pkg.jl/pull/1215">this PR</a> for more details.<ul><li>If you don&#39;t care to make this module a Julia package, simply delete its <code>.git</code> folder: <code>src/Modulename/.git</code>.</li><li>If you do care about publishing this module as a Julia package, then it is mandatory to keep it as git-repository. In this case it is sensible to put <code>src/ModuleName/.git</code> into the main <code>.gitignore</code> file.</li></ul></li></ol><p>Now whenever you do <code>using ModuleName</code>, the local version will be used. This will still work even if you transfer your project to another computer, because the Manifest.toml file stores the local path.</p><h2 id="Navigating-a-Project-1"><a class="docs-heading-anchor" href="#Navigating-a-Project-1">Navigating a Project</a><a class="docs-heading-anchor-permalink" href="#Navigating-a-Project-1" title="Permalink"></a></h2><p>To be able to navigate the project consistently, DrWatson provides the core function</p><article class="docstring"><header><a class="docstring-binding" id="DrWatson.projectdir" href="#DrWatson.projectdir"><code>DrWatson.projectdir</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">projectdir()</code></pre><p>Return the directory of the currently active project.</p><pre><code class="language-julia">projectdir(args...) = joinpath(projectdir(), args...)</code></pre><p>Join the path of the currently active project with <code>args</code> (typically other subfolders).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DrWatson.jl/blob/b0d424e53a6dba3ce15f873d6d50f50f838e9745/src/project_setup.jl#L18-L27">source</a></section></article><p>Besides the above, the following derivative functions</p><pre><code class="language-julia">datadir()
srcdir()
plotsdir()
scriptsdir()
papersdir()</code></pre><p>behave exactly like <code>projectdir</code> but have as root the appropriate subdirectory. These are also defined due to the frequent use of these subdirectories.</p><p>All of these functions take advantage of <code>joinpath</code>, ensuring an error-free path creation that works across different operating systems. It is heavily advised to use <code>projectdir</code> and derivatives by giving them the subpaths as arguments, instead of using multiplication between paths:</p><pre><code class="language-julia">datadir(&quot;foo&quot;, &quot;test.jld2&quot;) # preferred
datadir() * &quot;/foo/test.jld2&quot; # not recommended</code></pre><h3 id="Custom-directory-functions-1"><a class="docs-heading-anchor" href="#Custom-directory-functions-1">Custom directory functions</a><a class="docs-heading-anchor-permalink" href="#Custom-directory-functions-1" title="Permalink"></a></h3><p>It is straightforward to make custom directory functions if there is a directory you created that you access more often. Simply define</p><pre><code class="language-julia">customdir(args...) = projectdir(&quot;custom&quot;, args...)</code></pre><p>to make the <code>customdir</code> version that works exactly like e.g. <code>datadir</code> but for <code>&quot;custom&quot;</code> instead of <code>&quot;data&quot;</code>.</p><h2 id="Reproducibility-1"><a class="docs-heading-anchor" href="#Reproducibility-1">Reproducibility</a><a class="docs-heading-anchor-permalink" href="#Reproducibility-1" title="Permalink"></a></h2><p>The project setup approach that DrWatson suggests is designed to work flawlessly with Julia standards, to be easy to share and to be fully reproducible. There are three reasons that <strong>true</strong> reproducibility is possible:</p><ol><li>The project&#39;s used packages are embedded in the project because of <code>Manifest.toml</code>.</li><li>The navigation around the folders of the project uses local directories.</li><li>The project is a Git repository, which means that it has a detailed (and re-traceable) history of all changes and additions.</li></ol><p>If you send your entire project folder to a colleague, they only need to do:</p><pre><code class="language-julia">julia&gt; cd(&quot;path/to/project&quot;)
pkg&gt; activate .
pkg&gt; instantiate</code></pre><p>to use your project (<em>assuming of course that you are both using the same Julia installation and version</em>). All required packages and dependencies will be installed and then any script that was running in your computer will also be running in their computer <strong>in the same way!</strong></p><p>In addition, with DrWatson you have the possibility of &quot;tagging&quot; each simulation created with the commit id, see the discussion around <a href="../save/#DrWatson.gitdescribe"><code>gitdescribe</code></a> and <a href="../save/#DrWatson.tag!"><code>tag!</code></a>. This way, any data result obtained at any moment can be truly reproduced simply by resetting the Git tree to the appropriate commit and running the code.</p><h2 id="Transitioning-an-existing-project-to-DrWatson-1"><a class="docs-heading-anchor" href="#Transitioning-an-existing-project-to-DrWatson-1">Transitioning an existing project to DrWatson</a><a class="docs-heading-anchor-permalink" href="#Transitioning-an-existing-project-to-DrWatson-1" title="Permalink"></a></h2><p>If you already have an existing project with scripts and data etc., then there is no reason to use the <a href="#DrWatson.initialize_project"><code>initialize_project</code></a> function. The only requirement is that everything that belongs to your project is contained within a single folder (which can have an arbitrary amount of subfolders). If your project is already a Julia project (which means it has its own Project.toml and Manifest.toml files), then there is nothing more necessary to be done, you can immediatelly start using DrWatson with it. Although we recommend following the <a href="#Default-Project-Setup-1">Default Project Setup</a>, you don&#39;t have to do this either, since you can create your own <a href="#Custom-directory-functions-1">Custom directory functions</a>.</p><p>If your project is <em>not</em> also a Julia project, the steps necessary are still quite simple. You can do:</p><pre><code class="language-julia">julia&gt; cd(&quot;path/to/project&quot;)
pkg&gt; activate .
pkg&gt; add Package1 Package2 ...</code></pre><p>Julia will automatically make the Project.toml and Manifest.toml files for you as you add packages used by your project.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../workflow/">« DrWatson Workflow Tutorial</a><a class="docs-footer-nextpage" href="../name/">Naming Simulations »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 23 July 2021 11:42">Friday 23 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
